package {
    default_applicable_licenses: ["Android-Apache-2.0"],
    default_team: "trendy_team_android_storage",
}

android_test {
    name: "CtsModernMediaProviderTests",
    manifest: "AndroidManifest.xml",
    test_config: "AndroidTest.xml",
    srcs: [
        "src/**/*.java",
        "app/GalleryTestApp/src/**/*.java",
        "MediaProviderTestHelper/src/**/*.java",
        ":CtsModernMediaProviderTestUtils",
    ],
    static_libs: [
        "androidx.test.core",
        "compatibility-device-util-axt",
        "ctstestrunner-axt",
        "flag-junit",
        "junit",
        "truth",
        "mediaprovider_flags_java_lib",
        "cts-media-provider-lib",
    ],
    compile_multilib: "both",
    test_suites: [
        "general-tests",
        "mts-mediaprovider",
        "mcts-mediaprovider",
        "cts",
    ],
    sdk_version: "test_current",
    target_sdk_version: "34",
    min_sdk_version: "30",
    libs: [
        "android.test.base.stubs.test",
        "android.test.mock.stubs.test",
        "android.test.runner.stubs.test",
    ],
    data: [
        ":CtsProviderGalleryTestApp",
        ":CtsMediaProviderTestAppA",
        ":CtsMediaProviderTestAppB",
        ":CtsMediaProviderTestAppC",
    ],
    java_resources: [
        ":CtsMediaProviderTestAppA",
        ":CtsMediaProviderTestAppB",
        ":CtsMediaProviderTestAppC",
    ],
}

filegroup {
    name: "CtsModernMediaProviderTestUtils",
    srcs: [
        "src/android/provider/cts/media/modern/MediaStoreUtils.java",
        "src/android/provider/cts/media/modern/MediaProviderTestUtils.java",
        ":CtsProviderTestUtils",
    ],
}
